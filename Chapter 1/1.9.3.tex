\documentclass{article}
\usepackage{amsmath,amssymb,amsthm}
\usepackage{../proofsteps}

\newtheorem{lemma}{Lemma}

\begin{document}

\sectionlabel{Exercise 1.9.3.}

\begin{stm}{stm:193setup}[exercise]
Let $\mathbb{T}$ denote the set of sequences $(\phi_i)_{i=0}^{\infty}$ where $\phi_i \in S^1$ and $\phi_i = 2 \phi_{i+1} \mod 1$ for all $i$. Let $\alpha : \mathbb{T} \to \mathbb{T}$ be defined by 
\[
(\phi_0, \phi_1, \dots) \mapsto (2\phi_1, \phi_1, \phi_2, \dots).
\]
\end{stm}
\begin{stm}{stm:193q1}[exercise]
Show that $\mathbb{T}$ is a topological group.
\end{stm}

\begin{stm}{stm:193q2}[exercise]
Show that $\alpha$ is an automorphism
\end{stm}
    

\sectionlabel{Proof {\color{blue} + reasoning}:}

\begin{stm}{stm:start}[reasoning]
Let's first formulate basic lemmas to use throughout the exercise.
\end{stm}

\begin{lemma}\label{lemma:1}
$\forall x \in \mathbb{R}, \forall y \in \mathbb{R}, \ a, b \in \mathbb{N} : x \equiv_a y \Rightarrow bx \equiv_{a} by$. 
\end{lemma}

\begin{proof}
$\exists p \in \mathbb{Z} : x = y + pa$, so $bx = by + bpa$, so $bx \equiv_{a} by$.
\end{proof}

\begin{lemma}\label{lemma:3}
$\forall x \in \mathbb{R}, a,b \in \mathbb{N}$, $a(x \mod b) \equiv_b ax$.
\end{lemma}

\begin{proof}
Clearly, $x \mod b \equiv_b x$. By lemma \ref{lemma:1}, $a(x \mod b) \equiv_b ax$.
\end{proof}

\begin{lemma}\label{lemma:4}
$\forall x, y \in \mathbb{R}, \ \forall k \in \mathbb{N}$, $( x \mod k ) + ( y \mod k ) \equiv_k x + y$.
\end{lemma}

\begin{proof}
$x + y = ( x \mod k ) + ( y \mod k ) + pk + qk = (x \mod k) + (y \mod k) + (p+q)k$. So, $x + y \equiv_k (x \mod k) + (y \mod k)$.
\end{proof}

\begin{stm}{stm:additiondef}[final-proof]
Given $\psi$ and $\phi$ in $\mathbb{T}$, define $(\psi + \phi)_i = (\psi_i + \phi_i) \mod 1$.
\end{stm}

\begin{stm}{stm:groupclosuregoal}[final-proof]
Let $\psi$ and $\phi$ be elements of $\mathbb{T}$. It suffices to show $\psi_i + \phi_i \equiv_1 2(\psi + \phi)_{i+1}$.
\end{stm}

\begin{stm}{stm:groupclosurecalc}[final-proof]
By \ref{stm:193setup}, lemma \ref{lemma:4} and lemma \ref{lemma:3},
\begin{align*}
\psi_i + \phi_i &= (2\psi_{i+1} \mod 1) + (2\phi_{i+1} \mod 1) \\
&\equiv_1 2\psi_{i+1} + 2\phi_{i+1} \\
&= 2(\psi_{i+1} + \phi_{i+1}) \\
&\equiv_1 2((\psi + \phi)_{i+1} \mod 1) \\
&\equiv_1 2(\psi + \phi)_{i+1}
\end{align*}
\end{stm}

\begin{stm}{stm:groupclosureconclude}[final-proof]
From \ref{stm:groupclosurecalc} and \ref{stm:groupclosuregoal}, $\mathbb{T}$ is closed under addition.
\end{stm}

\begin{stm}{stm:inverse}[final-proof]
For $\phi \in \mathbb{T}$, define $(-\phi)_i := -\phi_i$.
\end{stm}

\begin{stm}{stm:inversecheck}[final-proof]
Clearly, this is the inverse of $\phi$.
\end{stm}

\begin{stm}{stm:contgoal}[reasoning]
Now, let's check continuity.
\end{stm}

\begin{stm}{stm:contsetup}[final-proof]
Suppose that $\phi^n \to \phi$ and $\psi^n \to \psi$ in $(S^1)^{\mathbb{N}_0}$. Let $n \ge 0$. By assumption, $\exists K_n$ s.t. $\forall j \le n, \ \phi_j^i = \phi_j$, $\psi_j^i = \psi_j$, hence $(\phi^i - \psi^i)_j = \phi_j - \psi_j$.
\end{stm}

\begin{stm}{stm:contconclude}[final-proof]
By \ref{stm:contsetup}, $\forall \varepsilon > 0, \exists k$ s.t. $d(\phi^i - \psi^i, \phi - \psi) \le \varepsilon \ \forall i \ge k$, so $\lim_{n \to \infty} d(\phi^n - \psi^n, \phi - \psi) = 0$, hence $(\phi, \psi) \mapsto \phi - \psi$ is continuous.
\end{stm}

\begin{stm}{stm:autogoal}[reasoning]
Now, we check $\alpha$ is a group automorphism. Is it possible to take a shortcut? I think that if $\alpha$ preserves the product and identity and is bijective, then it follows that $\alpha$ preserves inverses and that $\alpha^{-1}$ is a group homomorphism.
\end{stm}

\begin{stm}{stm:alphalinear}[final-proof]
    Let $\phi, \psi \in \mathbb{T}$. Show $\alpha(\phi) + \alpha(\psi) = \alpha(\phi + \psi)$. By lemma \ref{lemma:4} and lemma \ref{lemma:3},
    \begin{align*}
    (\alpha(\phi) + \alpha(\psi))_i 
    &= \left((2\phi_i) \bmod 1 + (2\psi_i) \bmod 1\right) \bmod 1 \\
    &\equiv_1 2(\phi_i + \psi_i) \\
    &\equiv_1 2\left((\phi + \psi)_i \bmod 1\right) \\
    &= \alpha(\phi + \psi)_i.
    \end{align*}
\end{stm}

\begin{stm}{stm:alphainv}[final-proof]
Clearly, $\alpha$ preserves the identity.
\end{stm}

\begin{stm}{stm:alphabijective}[reasoning]
Now, letâ€™s show $\alpha$ is bijective.
\end{stm}

\begin{stm}{stm:injective}[final-proof]
Suppose $\alpha(\phi) = \alpha(\psi)$. Then $\phi_{i-1} = \alpha(\phi)_i = \alpha(\psi)_i = \psi_{i-1} \ \forall i \ge 1$, so $\phi = \psi$, hence $\alpha$ is injective.
\end{stm}

\begin{stm}{stm:surjectiondef}[final-proof]
Let $\phi \in \mathbb{T}$. Let $(\phi')_i := \phi_{i+1} \ \forall i \ge 1$.
\end{stm}

\begin{stm}{stm:surjectioncheck}[final-proof]
$\alpha(\phi') = \phi$, so $\alpha$ is surjective.
\end{stm}

\begin{stm}{stm:autoconclude}[final-proof]
By \ref{stm:injective} and \ref{stm:surjectioncheck}, $\alpha$ is bijective. By \ref{stm:alphalinear}, \ref{stm:alphainv}, and \ref{stm:injective}, $\alpha$ is a group automorphism.
\end{stm} 

\begin{stm}{stm:homeocheck}[reasoning]
Now we need to show $\alpha$ is a homeomorphism. Note that $\alpha$ is a map between product topologies. This should simplify our proofs.
\end{stm}

\begin{stm}{stm:subbasis}[final-proof]
For product topologies the 1-d cylinders form a subbasis. So, to show that $\alpha$ is continuous it suffices to show that $\forall i \in \mathbb{N}, \pi_i \circ \alpha$ is continuous.
\end{stm}

\begin{stm}{stm:alphaprojection}[final-proof]
Let $i \in \mathbb{N}$. Note $\pi_i \circ \alpha : (\phi_0, \phi_1, \dots) \mapsto \begin{cases} \phi_{i-1} & \text{if } i \ge 1 \\ 2\phi_0 & \text{if } i = 0 \end{cases}$.
\end{stm}

\begin{stm}{stm:2smap}[final-proof]
The map $r : S^1 \to S^1 : s \mapsto 2s \mod 1$ is clearly continuous.
\end{stm}

\begin{stm}{stm:pullback}[final-proof]
By \ref{stm:2smap}, if $A \in \mathcal{T}(S^1)$, then 
\[
(\pi_i \circ \alpha)^{-1}(A) = 
\begin{cases}
(S^1)^{i-1} \times A \times S^1 \times \cdots & \text{if } i \ge 1 \\
r^{-1}(A) \times S^1 \times \cdots & \text{if } i = 0
\end{cases}
\]
\end{stm}

\begin{stm}{stm:alphacontinuous}[final-proof]
By \ref{stm:pullback} and \ref{stm:2smap}, $\pi_i \circ \alpha$ is continuous, so by \ref{stm:subbasis}, $\alpha$ is continuous.
\end{stm}

\begin{stm}{stm:alphainvcontproof}[final-proof]
Note $\pi_i \circ \alpha^{-1} : (\phi_0, \phi_1, \dots) \mapsto \phi_{i+1}$. This is clearly continuous, so by \ref{stm:subbasis}, $\alpha^{-1}$ is continuous, so by \ref{stm:alphacontinuous} and \ref{stm:autoconclude}, $\alpha$ is a homeomorphism.
\end{stm}

\end{document}

